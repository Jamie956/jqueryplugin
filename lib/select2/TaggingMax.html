<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8" />
		<link rel="stylesheet" href="css/bootstrap.css" />
		<link rel="stylesheet" href="css/select2.css" />
		<style type="text/css">
			body {
				padding: 40px;
			}
		</style>

		<script type="text/javascript" src="js/jquery-3.2.1.js"></script>
		<script type="text/javascript" src="js/select2.full.js"></script>

	</head>
	<script>
		$(document).ready(function() {
			var _data = [{
				text: 'admin label',
				children: [
					{ id: "admin.dashboard", text: 'Dashboard' },
	        		{ id: "admin.active_merchants", text: ' Active Merchants' }, 
	        		{ id: "admin.pending_merchants", text: 'Pending Merchants' },
	        		{ id: "admin.restore_deleted_merchants", text: 'Restore Deleted Merchants' },
	        		{ id: "admin.softpoint", text: 'Softpoint Registration' }, 
	        		{ id: "admin.orders", text: 'Orders' }, 
	        		{ id: "admin.refund", text: 'Refund' },
	        		{ id: "admin.transaction", text: 'Transaction' }, 
	        		{ id: "admin.deals", text: 'Deals' },
	        		{ id: "admin.all_deals", text: 'All Deals' },
	        		{ id: "admin.loyalty", text: 'Loyalty' }, 
	        		{ id: "admin.settlement", text: 'Settlement' },
	        		{ id: "admin.users_roles", text: 'Users & Roles' }, 
	        		{ id: "admin.agreements", text: 'Agreements' },
	        		{ id: "admin.contracts", text: 'Contracts' }, 
	        		{ id: "admin.patron_users", text: 'Patron Users' },
	        		{ id: "admin.printer_status", text: 'Printer Status' },
	        		{ id: "admin.settings", text: 'Settings' }
				]
			}];
			
			var _data2 = [
				{id: 'apple',text: 'Apple'}, 
				{id: 'pear',text: 'Pear'}, 
				{id: 'orange',text: 'Orange'}, 
				{id: 'berry',text: 'Berry'}
			];
			
			var $select = $(".js-example-tags");
			$select.select2({
				tags: true,
				data: _data2,
				multiple: true
			});
			
			var selected_data = [];
			selected_data.push('apple');
			selected_data.push('pear');
			selected_data.push('berry');
			
			$select.val(selected_data).trigger("change");
			$('#myData').val(JSON.stringify($select.val()));
			
			$('#tagForm').submit(function(e) {
				var _val = $select.val();
//				alert(Array.isArray(_val));
				alert('_val -> '+ _val);
				
				//obj(arr) -> str
				var _json_str = JSON.stringify(_val);
//				alert(Array.isArray(_json_str));
				alert('_json_str -> '+ _json_str)
				
				//str -> obj
				var _json_obj = JSON.parse(_json_str);
				alert('_json_obj -> '+ _json_obj)
			});
			
			$select.on("select2:select", function(e) {
				$('#myData').val(JSON.stringify($select.val()));
			});
			
			$select.on("select2:unselect", function(e) {
				$('#myData').val(JSON.stringify($select.val()));
			});
		});
	</script>

	<body>
		<input type="text" id="myData"/>
		
		<form action="" id="tagForm">
			<select class="js-example-tags"></select><br />
			<button type="submit">Submit</button>
		</form>
		
	</body>

</html>