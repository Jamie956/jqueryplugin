<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>JSON to CSV</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>

<body>
    <textarea id="data" style="width: 700px;height: 200px;">[{"model":"Samsung S7","chargers":"55","cases":"56","earphones":"57","scratched":"2"},{"chargers":"77","cases":"78","model":"Pixel XL","earphones":"79","scratched":"4"},{"model":"iPhone 7","chargers":"88","cases":"89","earphones":"90","scratched":"6"}]</textarea>
    <div id="export">
        <a href="#">export</a>
    </div>
</body>
<script type="text/javascript">
$('#export').click(function(event) {
    var headers = {
        model: 'Phone Model'.replace(/,/g, ''),
        chargers: "Chargers",
        cases: "Cases",
        earphones: "Earphones"
    };
    var items = $('#data').val();
    items = JSON.parse(items);
    download(headers, items);
});

function convertToCSV(objArray) {
    var array = typeof objArray != 'object' ? JSON.parse(objArray) : objArray;
    var str = '';
    for (var i = 0; i < array.length; i++) {
        var line = '';
        for (var index in array[i]) {
            if (line != '') line += ','
            line += array[i][index];
        }
        str += line + '\r\n';
    }
    return str;
}

function exportCSVFile(headers, items, fileTitle) {
    if (headers) {
        items.unshift(headers);
    }
    // Convert Object to JSON
    var jsonObject = JSON.stringify(items);
    var csv = this.convertToCSV(jsonObject);
    var exportedFilenmae = fileTitle + '.csv' || 'export.csv';
    var blob = new Blob([csv], {
        type: 'text/csv;charset=utf-8;'
    });
    if (navigator.msSaveBlob) { // IE 10+
        navigator.msSaveBlob(blob, exportedFilenmae);
    } else {
        var link = document.createElement("a");
        if (link.download !== undefined) { // feature detection
            // Browsers that support HTML5 download attribute
            var url = URL.createObjectURL(blob);
            link.setAttribute("href", url);
            link.setAttribute("download", exportedFilenmae);
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }
    }
}

function download(headers, items) {
    var fm_items = [];
    items.forEach((item) => {
        fm_items.push({
            model: item.model.replace(/,/g, ''),
            chargers: item.chargers,
            cases: item.cases,
            earphones: item.earphones
        });
    });
    var fileTitle = 'orders';
    exportCSVFile(headers, fm_items, fileTitle);
}
</script>

</html>