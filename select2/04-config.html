<!-- config -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/css/select2.min.css" rel="stylesheet" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/js/select2.min.js"></script>

<style>
  .myselect {
    width: 50%;
  }
</style>

<select class="myselect">
  <!-- <option value="AL">Alabama</option>
  <option value="WY">Wyoming</option>
  <optgroup label="Fruit">
    <option>Apple</option>
    <option>Pear</option>
    <option>Peach</option>
  </optgroup> -->
</select>

<script>
  $(document).ready(function () {
    $('.myselect').select2({
      ajax: {
        url: 'https://api.github.com/search/repositories',
        // url: function (params) {
        //   return '/some/url/' + params.term;
        // },
        dataType: 'json',
        cache: false,
        data: function (params) {
          var query = {
            search: params.term,
            page: params.page || 1,
            type: 'public'
          }
          return query;
        },
        delay: 250,
        processResults: function (data) {
          return {
            results: data.items
          };
        },
        transport: function (params, success, failure) {
          var request = new AjaxRequest(params.url, params);
          request.on('success', success);
          request.on('failure', failure);
        },
      },
    });
  });
</script>